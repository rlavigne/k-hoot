<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Interactif</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4">
        <div class="bg-white shadow-lg rounded-lg p-6 max-w-xl mx-auto">
            <h1 class="text-2xl font-bold text-center text-blue-600">Quiz Interactif</h1>
            <div class="progress-bar bg-gray-200 rounded-full h-4 mt-4">
                <div id="progress" class="bg-blue-500 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <div class="flex justify-between text-sm text-gray-600 mt-1">
                <span id="current-score" class="text-2xl font-bold">0 / 900</span>
                <span id="question-counter" class="text-lg">Question 1/30</span>
            </div>
            <div id="quiz">
                <div class="question text-lg font-semibold mt-4" id="question">Question</div>
                <div class="timer text-sm font-bold text-red-600 text-center mt-2" id="timer"></div>
                <div class="choices mt-4 space-y-2" id="choices"></div>
                <div class="score text-xl font-bold text-green-600 text-center mt-6 hidden" id="score"></div>
                <button class="bg-blue-500 text-white px-4 py-2 rounded mt-6 w-full hover:bg-blue-600 transition-colors" id="restart">Recommencer le quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
        { question: "Quand a eu lieu la Belle Époque au Québec ?", choices: [ "Entre 1900 et 1914", "Entre 1914 et 1918", "Entre 1929 et 1939", "Entre 1890 et 1900" ], correct: 0, reference: "Unité 9 - La Belle Époque, premier paragraphe" }, { question: "Pourquoi la Belle Époque prend-elle fin en 1914 ?", choices: [ "À cause de la Première Guerre mondiale", "À cause de la Grande Crise", "À cause de la Seconde Guerre mondiale", "À cause de la révolution industrielle" ], correct: 0, reference: "Unité 9 - La Belle Époque, premier paragraphe" }, { question: "Quel phénomène décrit le fait que beaucoup de personnes déménagent en ville ?", choices: [ "L'urbanisation", "L'industrialisation", "L'émigration", "La mondialisation" ], correct: 0, reference: "Unité 9 - La Belle Époque, section 'L'urbanisation'" }, { question: "Qui a fondé la première Caisse populaire en 1900 ?", choices: [ "Alphonse Desjardins", "Sir Wilfrid Laurier", "John A. Macdonald", "Maurice Duplessis" ], correct: 0, reference: "Unité 9 - La Belle Époque, deuxième paragraphe" }, { question: "Pourquoi Alphonse Desjardins a-t-il fondé la première Caisse populaire ?", choices: [ "Parce que les banques refusaient de prêter aux agriculteurs", "Pour aider les hommes d'affaires à s'enrichir", "Pour investir dans les inventions", "Pour soutenir la Grande-Bretagne pendant la guerre" ], correct: 0, reference: "Unité 9 - La Belle Époque, deuxième paragraphe" }, { question: "Quel moyen de transport permet aux quartiers éloignés du centre-ville de se développer ?", choices: [ "Le tramway", "L'automobile", "La bicyclette", "Le métro" ], correct: 0, reference: "Unité 9 - La Belle Époque, section 'L'urbanisation'" }, { question: "Quelle invention n'est pas mentionnée comme changeant la vie des Québécois pendant la Belle Époque ?", choices: [ "Le grille-pain", "L'ordinateur", "L'électricité", "L'automobile" ], correct: 1, reference: "Unité 9 - La Belle Époque, section 'Les inventions'" }, { question: "Pendant la Belle Époque, quel appareil ménager est apparu ?", choices: [ "L'aspirateur", "Le réfrigérateur", "Le micro-ondes", "La machine à laver" ], correct: 0, reference: "Unité 9 - La Belle Époque, section 'Les inventions'" }, { question: "Qu'est-ce que l'urbanisation ?", choices: [ "Le développement rapide des villes", "L'amélioration des transports", "La découverte de nouvelles inventions", "Le départ des gens vers les campagnes" ], correct: 0, reference: "Unité 9 - La Belle Époque, section 'L'urbanisation'" }, { question: "Qu'est-ce que la Belle Époque ?", choices: [ "Une période de prospérité entre 1900 et 1914", "Une période de guerre", "Une période de crise économique", "Une période de colonisation" ], correct: 0, reference: "Unité 9 - La Belle Époque, premier paragraphe" }, { question: "Quand la Grande-Bretagne déclare-t-elle la guerre à l'Allemagne ?", choices: [ "Le 4 août 1914", "Le 11 novembre 1918", "Le 24 octobre 1929", "Le 1er septembre 1939" ], correct: 0, reference: "Unité 10 - La Première Guerre mondiale, premier paragraphe" }, { question: "Pourquoi le Canada entre-t-il en guerre en 1914 ?", choices: [ "Parce qu'il fait partie de l'Empire britannique", "Parce qu'il a été attaqué par l'Allemagne", "Pour soutenir les États-Unis", "Pour obtenir son indépendance" ], correct: 0, reference: "Unité 10 - La Première Guerre mondiale, premier paragraphe" }, { question: "Quelle était l'opinion des francophones sur la participation à la guerre ?", choices: [ "Ils étaient contre, car elle ne les concernait pas", "Ils étaient pour, car c'était leur devoir", "Ils étaient indifférents", "Ils voulaient envahir l'Europe" ], correct: 0, reference: "Unité 10 - La Première Guerre mondiale, section 'La division au sein de la population'" }, { question: "Quelle était l'opinion des anglophones sur la participation à la guerre ?", choices: [ "Ils étaient pour, car ils voulaient soutenir la Grande-Bretagne", "Ils étaient contre, car elle ne les concernait pas", "Ils étaient neutres", "Ils voulaient rester isolés" ], correct: 0, reference: "Unité 10 - La Première Guerre mondiale, section 'La division au sein de la population'" }, { question: "Quand la Première Guerre mondiale a-t-elle pris fin ?", choices: [ "Le 11 novembre 1918", "Le 4 août 1914", "Le 24 octobre 1929", "Le 1er septembre 1939" ], correct: 0, reference: "Unité 10 - La Première Guerre mondiale, dernier paragraphe" }, { question: "Pourquoi appelle-t-on ce conflit la Première Guerre mondiale ?", choices: [ "Parce qu'elle touche plusieurs pays qui ont formé des alliances", "Parce qu'elle est la première guerre en Europe", "Parce que c'est la plus longue guerre", "Parce qu'elle n'a impliqué que deux pays" ], correct: 0, reference: "Unité 10 - La Première Guerre mondiale, premier paragraphe" }, { question: "Quelles années correspondent aux Années folles ?", choices: [ "De 1918 à 1929", "De 1900 à 1914", "De 1929 à 1939", "De 1939 à 1945" ], correct: 0, reference: "Unité 11 - Les Années folles, premier paragraphe" }, { question: "Lequel de ces éléments ne caractérise pas les Années folles ?", choices: [ "Augmentation des privations dues à la guerre", "Amélioration des conditions de vie", "Augmentation de la consommation", "Diminution du nombre d'heures de travail" ], correct: 0, reference: "Unité 11 - Les Années folles, liste des éléments caractérisant la période" }, { question: "Quelle nouvelle classe de travailleurs apparaît durant les Années folles ?", choices: [ "Les employés de bureau et de magasins", "Les agriculteurs", "Les artisans", "Les ouvriers industriels" ], correct: 0, reference: "Unité 11 - Les Années folles, dernier point de la liste" }, { question: "Pourquoi les femmes mariées devaient-elles arrêter de travailler dans les années 1920 ?", choices: [ "Pour prendre soin de leur famille", "C'était une obligation légale", "Elles gagnaient plus que leurs maris", "C'était une règle religieuse" ], correct: 0, reference: "Unité 11 - Les Années folles, section 'Le féminisme et les inégalités'" }, { question: "Quelles inégalités subissent les femmes dans les années 1920 ?", choices: [ "Elles sont moins bien payées que les hommes", "Elles ont plus de droits que les hommes", "Elles dirigent les entreprises", "Elles ont le droit de voter" ], correct: 0, reference: "Unité 11 - Les Années folles, section 'Le féminisme et les inégalités'" }, { question: "Comment les femmes réagissent-elles face aux inégalités des années 1920 ?", choices: [ "Elles se regroupent dans des mouvements féministes", "Elles acceptent leur situation", "Elles quittent le pays", "Elles cessent de travailler" ], correct: 0, reference: "Unité 11 - Les Années folles, section 'Le féminisme et les inégalités'" }, { question: "Quel est l'objectif des mouvements féministes dans les années 1920 ?", choices: [ "Obtenir plus de droits pour les femmes", "Maintenir les traditions", "Soutenir les hommes au front", "Réduire les salaires" ], correct: 0, reference: "Unité 11 - Les Années folles, section 'Le féminisme et les inégalités'" }, { question: "Quel événement marque le début de la Grande Crise ?", choices: [ "Le krach boursier du 24 octobre 1929", "La fin de la Première Guerre mondiale", "Le début de la Seconde Guerre mondiale", "La fondation de la première Caisse populaire" ], correct: 0, reference: "Unité 12 - La Grande Crise, premier paragraphe" }, { question: "Combien de temps a duré la Grande Crise ?", choices: [ "10 ans", "5 ans", "20 ans", "2 ans" ], correct: 0, reference: "Unité 12 - La Grande Crise, premier paragraphe" }, { question: "Quelle n'est pas une conséquence de la Grande Crise au Canada ?", choices: [ "Augmentation des exportations", "Fermeture d'usines et d'entreprises", "Pertes d'emplois", "Augmentation de la pauvreté" ], correct: 0, reference: "Unité 12 - La Grande Crise, section 'Les conséquences de la Grande Crise au Canada'" }, { question: "Comment les gouvernements ont-ils aidé les gens pendant la Grande Crise ?", choices: [ "En offrant des coupons échangeables contre de la nourriture et des vêtements", "En augmentant les impôts", "En fermant les organismes de charité", "En déclarant la guerre" ], correct: 0, reference: "Unité 12 - La Grande Crise, section 'La charité et l'aide des gouvernements'" }, { question: "Quel était l'objectif des programmes de travaux publics mis en place pendant la Grande Crise ?", choices: [ "Employer les travailleurs sans emploi", "Construire des monuments", "Élargir l'armée", "Réduire la population urbaine" ], correct: 0, reference: "Unité 12 - La Grande Crise, section 'La charité et l'aide des gouvernements'" }, { question: "Qu'est-ce qu'un « krach » ?", choices: [ "Une chute brutale des valeurs boursières", "Une nouvelle invention technologique", "Un mouvement artistique", "Un type de charité" ], correct: 0, reference: "Unité 12 - La Grande Crise, premier paragraphe" }, { question: "Vers qui les gens dans le besoin se tournaient-ils pendant la Grande Crise ?", choices: [ "Les organismes de charité", "Les banques", "Les entreprises privées", "Les universités" ], correct: 0, reference: "Unité 12 - La Grande Crise, section 'La charité et l'aide des gouvernements'" }, { question: "Pourquoi les propriétaires d'actions ont-ils vendu leurs actions le 24 octobre 1929 ?", choices: [ "Pour éviter de perdre trop d'argent", "Pour investir dans l'immobilier", "Parce que les actions montaient en valeur", "Pour financer la guerre" ], correct: 0, reference: "Unité 12 - La Grande Crise, premier paragraphe" }, { question: "Quelle est l'une des raisons pour lesquelles la pauvreté a augmenté pendant la Grande Crise ?", choices: [ "La perte d'emplois due à la fermeture d'usines", "L'augmentation des salaires", "La baisse des prix des produits", "L'amélioration des conditions de vie" ], correct: 0, reference: "Unité 12 - La Grande Crise, section 'Les conséquences de la Grande Crise au Canada'" } ,
        { "question": "Quel appareil ménager, en plus du grille-pain, est apparu pendant la Belle Époque ?", "choices": [ "L'aspirateur", "Le micro-ondes", "Le lave-vaisselle", "Le réfrigérateur" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'Les inventions'" }, { "question": "Quel moyen de transport a effectué son premier vol au début des années 1900 ?", "choices": [ "L'avion", "L'hélicoptère", "Le dirigeable", "La fusée" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'Les inventions'" }, { "question": "Quelle invention a permis d'améliorer l'éclairage des rues, des maisons et des commerces pendant la Belle Époque ?", "choices": [ "L'électricité", "Le gaz naturel", "Les lampes à huile", "Les bougies" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'Les inventions'" }, { "question": "Comment les conditions de vie ont-elles changé pendant les Années folles ?", "choices": [ "Elles se sont améliorées", "Elles se sont détériorées", "Elles sont restées les mêmes", "Elles ont empiré" ], "correct": 0, "reference": "Unité 11 - Les Années folles, liste des éléments caractérisant la période" }, { "question": "Qu'est-ce qui a permis aux travailleurs d'habiter plus loin de leur lieu de travail au début du 20e siècle ?", "choices": [ "Le tramway", "L'automobile", "La bicyclette", "Le train à vapeur" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'L'urbanisation'" }, { "question": "Quelle période historique a été marquée par une augmentation de la consommation et une baisse des prix des produits ?", "choices": [ "Les Années folles", "La Belle Époque", "La Première Guerre mondiale", "La Grande Crise" ], "correct": 0, "reference": "Unité 11 - Les Années folles, liste des éléments caractérisant la période" }, { "question": "Qu'est-ce que les gouvernements ont mis en place pour aider les gens pendant la Grande Crise ?", "choices": [ "Des programmes de travaux publics", "Des augmentations d'impôts", "Des réductions de salaires", "Des fermetures d'écoles" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, section 'La charité et l'aide des gouvernements'" }, { "question": "Quelle était la réaction initiale de l'armée canadienne pour recruter des soldats pendant la Première Guerre mondiale ?", "choices": [ "Faire appel aux volontaires", "Imposer la conscription", "Engager des mercenaires", "Recruter uniquement des francophones" ], "correct": 0, "reference": "Unité 10 - La Première Guerre mondiale, section 'La division au sein de la population'" }, { "question": "Quel était le rôle des infirmières pendant la Première Guerre mondiale ?", "choices": [ "Elles ont répondu à l'appel pour joindre l'armée", "Elles ont mené des mouvements féministes", "Elles ont travaillé dans les usines", "Elles ont refusé de participer à la guerre" ], "correct": 0, "reference": "Unité 10 - La Première Guerre mondiale, section 'La division au sein de la population'" }, { "question": "Quel impact la Grande Crise a-t-elle eu sur les exportations de produits au Canada ?", "choices": [ "Elles ont diminué de façon importante", "Elles ont augmenté", "Elles sont restées stables", "Elles ont cessé complètement" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, section 'Les conséquences de la Grande Crise au Canada'" }, { "question": "Quels types de projets ont été réalisés dans le cadre des programmes de travaux publics pendant la Grande Crise ?", "choices": [ "Routes, aqueducs, parcs", "Centres commerciaux", "Écoles privées", "Usines d'armement" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, section 'La charité et l'aide des gouvernements'" }, { "question": "Qu'est-ce qui caractérise le 'relâchement des mœurs' pendant les Années folles ?", "choices": [ "Des comportements plus libres, moins cadrés par la religion", "Une stricte observance des traditions religieuses", "Une augmentation des règles sociales", "Un retour aux valeurs conservatrices" ], "correct": 0, "reference": "Unité 11 - Les Années folles, liste des éléments caractérisant la période" }, { "question": "Quel nouveau moyen de transport est apparu pendant la Belle Époque en plus de l'automobile ?", "choices": [ "La bicyclette", "Le métro", "Le train électrique", "La moto" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'Les inventions'" }, { "question": "Quelles actions les femmes ont-elles entreprises pour mettre fin à la discrimination dans les années 1920 ?", "choices": [ "Se regrouper dans des mouvements féministes", "Arrêter de travailler", "Déménager en ville", "S'opposer au vote des hommes" ], "correct": 0, "reference": "Unité 11 - Les Années folles, section 'Le féminisme et les inégalités'" }, { "question": "Quel événement économique s'est produit le 24 octobre 1929 ?", "choices": [ "La chute de la Bourse de New York", "La fin de la Première Guerre mondiale", "Le début de la Seconde Guerre mondiale", "La fondation de la première Caisse populaire" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, premier paragraphe" }, { "question": "Comment appelle-t-on la chute brutale des actions qui a causé la Grande Crise ?", "choices": [ "Un krach", "Une inflation", "Une récession", "Un boom économique" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, premier paragraphe" }, { "question": "Quelle période est connue pour être une période de découvertes scientifiques et de progrès technologiques ?", "choices": [ "La Belle Époque", "Les Années folles", "La Grande Crise", "La Première Guerre mondiale" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'Les inventions'" }, { "question": "Pourquoi les hommes d'affaires se sont-ils enrichis pendant la Belle Époque ?", "choices": [ "À cause d'un boom économique dans la province", "Grâce à la Grande Crise", "À cause de la guerre", "En empruntant aux agriculteurs" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, deuxième paragraphe" }, { "question": "Quels étaient les besoins comblés par les organismes de charité pendant la Grande Crise ?", "choices": [ "Vêtements et nourriture", "Logement gratuit", "Emplois bien rémunérés", "Services médicaux" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, section 'La charité et l'aide des gouvernements'" }, { "question": "Quelle est l'une des causes pour lesquelles les banques refusaient de prêter aux agriculteurs pendant la Belle Époque ?", "choices": [ "Malgré le boom économique, elles refusaient de prêter de l'argent aux agriculteurs", "Parce que les agriculteurs étaient trop riches", "Parce que les agriculteurs ne remboursaient pas leurs prêts", "Parce que les banques manquaient de fonds" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, deuxième paragraphe" }, { "question": "Quels appareils ont commencé à occuper de plus en plus de place dans la société pendant la Belle Époque ?", "choices": [ "L'électricité, le téléphone et l'automobile", "La télévision et l'ordinateur", "Le micro-ondes et le réfrigérateur", "Le train à grande vitesse et l'internet" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'Les inventions'" }, { "question": "Pendant la Grande Crise, quelle mesure n'a pas été prise par les gouvernements pour aider les gens dans le besoin ?", "choices": [ "Augmenter les impôts", "Offrir des coupons échangeables", "Mettre en place des programmes de travaux publics", "Aider à combler les besoins de base" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, section 'La charité et l'aide des gouvernements'" }, { "question": "Quel était l'impact de l'urbanisation sur les villes au début du 20e siècle ?", "choices": [ "Les villes se développent rapidement", "Les villes se dépeuplent", "Les villes restent stables", "Les villes deviennent des zones agricoles" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'L'urbanisation'" }, { "question": "Quelle était l'attitude des francophones envers la guerre, selon la section 'La division au sein de la population' ?", "choices": [ "Ils étaient contre leur participation, car elle ne les concernait pas", "Ils étaient pour leur participation", "Ils étaient indifférents", "Ils voulaient envahir l'Allemagne" ], "correct": 0, "reference": "Unité 10 - La Première Guerre mondiale, section 'La division au sein de la population'" }, { "question": "Quel était l'effet de la diminution du nombre d'heures de travail pendant les Années folles ?", "choices": [ "Les conditions de vie s'améliorent", "Les salaires diminuent", "Le chômage augmente", "Les gens travaillent plus" ], "correct": 0, "reference": "Unité 11 - Les Années folles, liste des éléments caractérisant la période" }, { "question": "Quel élément ne fait pas partie des conséquences de la Grande Crise au Canada ?", "choices": [ "Augmentation des exportations", "Fermeture d'usines", "Augmentation de la pauvreté", "Pertes d'emplois" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, section 'Les conséquences de la Grande Crise au Canada'" }, { "question": "Comment les femmes étaient-elles payées par rapport aux hommes dans les années 1920 ?", "choices": [ "Elles étaient moins bien payées", "Elles étaient payées de la même manière", "Elles étaient mieux payées", "Elles n'étaient pas payées" ], "correct": 0, "reference": "Unité 11 - Les Années folles, section 'Le féminisme et les inégalités'" }, { "question": "Quelle était une des inventions qui ont changé et facilité la vie des Québécois pendant la Belle Époque ?", "choices": [ "Le téléphone", "La télévision", "L'ordinateur", "Le satellite" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'Les inventions'" }, { "question": "Quel est l'un des moyens par lesquels les gouvernements ont aidé les travailleurs sans emploi pendant la Grande Crise ?", "choices": [ "Mettre en place des programmes de travaux publics", "Donner de l'argent directement aux entreprises", "Créer plus de postes gouvernementaux", "Réduire les heures de travail" ], "correct": 0, "reference": "Unité 12 - La Grande Crise, section 'La charité et l'aide des gouvernements'" }, { "question": "Pendant la Belle Époque, quels types de bâtiments apparaissent dans les villes ?", "choices": [ "Des gratte-ciels et des grands magasins", "Des châteaux forts", "Des temples anciens", "Des pyramides" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'L'urbanisation'" }, { "question": "Pourquoi le Canada est-il entré en guerre en 1914 ?", "choices": [ "Parce qu'il fait partie de l'Empire britannique", "Parce qu'il a été attaqué directement", "Pour soutenir l'Allemagne", "Pour envahir l'Europe" ], "correct": 0, "reference": "Unité 10 - La Première Guerre mondiale, premier paragraphe" }, { "question": "Quelle période a été marquée par une augmentation de l'utilisation de l'automobile ?", "choices": [ "Les Années folles", "La Grande Crise", "La Première Guerre mondiale", "La Belle Époque" ], "correct": 0, "reference": "Unité 11 - Les Années folles, liste des éléments caractérisant la période" }, { "question": "Comment les salaires ont-ils évolué pendant les Années folles ?", "choices": [ "Ils ont augmenté", "Ils ont diminué", "Ils sont restés stables", "Ils ont été supprimés" ], "correct": 0, "reference": "Unité 11 - Les Années folles, liste des éléments caractérisant la période" }, { "question": "Qu'est-ce qui a permis le développement des quartiers éloignés du centre-ville au début du 20e siècle ?", "choices": [ "Le tramway", "La voiture électrique", "Le métro", "La moto" ], "correct": 0, "reference": "Unité 9 - La Belle Époque, section 'L'urbanisation'" } 
        ];

        const shuffledQuestions = [...questions]
            .sort(() => Math.random() - 0.5)
            .slice(0, 30);

        const questionElement = document.getElementById("question");
        const choicesElement = document.getElementById("choices");
        const scoreElement = document.getElementById("score");
        const restartButton = document.getElementById("restart");
        const timerElement = document.getElementById("timer");

        let currentQuestionIndex = 0;
        let score = 0;
        let countdown;

        const QUESTION_TIME = 20;
        const MAX_POINTS_PER_QUESTION = 30;

        const POINTS_CONFIG = {
            FAST: 30,    // 0-7 secondes
            MEDIUM: 20,  // 8-14 secondes
            SLOW: 10     // 15-20 secondes
        };

        function calculatePoints(timeLeft) {
            if (timeLeft >= 13) return POINTS_CONFIG.FAST;
            if (timeLeft >= 6) return POINTS_CONFIG.MEDIUM;
            return POINTS_CONFIG.SLOW;
        }

        function updateProgressBar() {
            const progressBar = document.getElementById("progress");
            const currentScoreElement = document.getElementById("current-score");
            const maxPossibleScore = shuffledQuestions.length * MAX_POINTS_PER_QUESTION;
            const percentage = (score / maxPossibleScore) * 100;
            progressBar.style.width = `${percentage}%`;
            currentScoreElement.textContent = `${score} / ${maxPossibleScore}`;
        }

        function showQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];
            questionElement.textContent = question.question;
            choicesElement.innerHTML = "";
            let timeLeft = QUESTION_TIME;
            timerElement.textContent = `Temps restant : ${timeLeft} secondes`;
            timerElement.classList.remove('text-red-600');

            // Créer un tableau de choix avec leurs indices
            const shuffledChoices = question.choices.map((choice, index) => ({
                text: choice,
                originalIndex: index
            })).sort(() => Math.random() - 0.5);

            shuffledChoices.forEach((choice) => {
                const button = document.createElement("button");
                button.setAttribute('type', 'button');
                button.classList.add(
                    "choice",
                    "w-full",
                    "bg-gray-200",
                    "px-4",
                    "py-3",
                    "rounded",
                    "hover:bg-blue-300",
                    "cursor-pointer",
                    "transition",
                    "focus:outline-none",
                    "focus:ring-2",
                    "focus:ring-blue-500"
                );
                button.textContent = choice.text;
                button.addEventListener("click", () => checkAnswer(choice.originalIndex));
                choicesElement.appendChild(button);
            });

            // Start countdown
            countdown = setInterval(() => {
                timeLeft--;
                timerElement.textContent = `Temps restant : ${timeLeft} secondes`;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    checkAnswer(-1); // Timeout: No answer selected
                }
            }, 1000);

            // Mettre à jour le compteur de questions
            document.getElementById("question-counter").textContent = 
                `Question ${currentQuestionIndex + 1}/${shuffledQuestions.length}`;
        }

        function checkAnswer(selected) {
            clearInterval(countdown);
            const timeLeft = parseInt(timerElement.textContent.match(/\d+/)[0]);
            const question = shuffledQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll(".choice");
            const feedbackContainer = document.createElement('div');
            feedbackContainer.classList.add('mt-4', 'space-y-2');
            
            // Message de feedback
            const feedbackMessage = document.createElement('div');
            feedbackMessage.classList.add('text-center', 'font-bold');
            
            if (selected === question.correct) {
                const pointsEarned = calculatePoints(timeLeft);
                score += pointsEarned;
                
                feedbackMessage.textContent = `Bonne réponse! +${pointsEarned} points 👏`;
                feedbackMessage.classList.add('text-green-600');
                buttons[selected]?.classList.add("bg-green-400");
                updateProgressBar();
            } else if (selected !== -1) {
                feedbackMessage.textContent = "Mauvaise réponse 😕";
                feedbackMessage.classList.add('text-red-600');
                buttons[selected]?.classList.add("bg-red-400");
                buttons[question.correct]?.classList.add("bg-green-400");
            } else {
                feedbackMessage.textContent = "Temps écoulé 😕";
                feedbackMessage.classList.add('text-red-600');
                buttons[question.correct]?.classList.add("bg-green-400");
            }

            // Cadre de référence
            const referenceBox = document.createElement('div');
            referenceBox.classList.add('bg-gray-100', 'p-4', 'rounded-lg', 'text-sm', 'text-gray-700');
            referenceBox.textContent = `Référence: ${question.reference}`;

            // Bouton Continuer
            const continueButton = document.createElement('button');
            continueButton.textContent = 'Continuer';
            continueButton.classList.add(
                'bg-blue-500',
                'text-white',
                'px-4',
                'py-2',
                'rounded',
                'w-full',
                'hover:bg-blue-600',
                'transition-colors'
            );
            
            feedbackContainer.appendChild(feedbackMessage);
            feedbackContainer.appendChild(referenceBox);
            feedbackContainer.appendChild(continueButton);
            choicesElement.appendChild(feedbackContainer);
            
            buttons.forEach((button) => (button.style.pointerEvents = "none"));
            
            continueButton.addEventListener('click', () => {
                currentQuestionIndex++;
                if (currentQuestionIndex < shuffledQuestions.length) {
                    showQuestion();
                } else {
                    showScore();
                }
            });
        }

        function showScore() {
            questionElement.style.display = "none";
            choicesElement.style.display = "none";
            timerElement.style.display = "none";
            scoreElement.style.display = "block";
            
            // Calcul du pourcentage basé sur le score maximum possible
            const maxPossibleScore = shuffledQuestions.length * MAX_POINTS_PER_QUESTION;
            const percentage = (score / maxPossibleScore) * 100;
            
            let message = "";
            if (percentage >= 80) message = "Excellent! 🎉";
            else if (percentage >= 60) message = "Bien joué! 👍";
            else message = "Continuez vos efforts! 💪";
            
            scoreElement.innerHTML = `
                <div class="text-2xl mb-4">Votre score : ${score} / ${maxPossibleScore}</div>
                <div class="text-lg text-gray-600">${message}</div>
            `;
            restartButton.style.display = "block";
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            updateProgressBar(); // Réinitialiser la barre de progression
            
            // Réafficher les éléments cachés
            questionElement.style.display = "block";
            choicesElement.style.display = "block";
            timerElement.style.display = "block";
            scoreElement.style.display = "none";
            
            // Remélanger les questions
            shuffledQuestions.sort(() => Math.random() - 0.5);
            
            showQuestion();
        }

        restartButton.addEventListener("click", restartQuiz);

        showQuestion();
    </script>
</body>
</html>