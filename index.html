<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Interactif</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4">
        <div class="bg-white shadow-lg rounded-lg p-6 max-w-xl mx-auto">
            <h1 class="text-2xl font-bold text-center text-blue-600">Quiz Interactif</h1>
            <div class="progress-bar bg-gray-200 rounded-full h-4 mt-4">
                <div id="progress" class="bg-blue-500 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <div class="flex justify-between text-sm text-gray-600 mt-1">
                <span id="current-score" class="text-2xl font-bold">0 / 900</span>
                <span id="question-counter" class="text-lg">Question 1/30</span>
            </div>
            <div id="quiz">
                <div class="question text-lg font-semibold mt-4" id="question">Question</div>
                <div class="timer text-sm font-bold text-red-600 text-center mt-2" id="timer"></div>
                <div class="choices mt-4 space-y-2" id="choices"></div>
                <div class="score text-xl font-bold text-green-600 text-center mt-6 hidden" id="score"></div>
                <button class="bg-blue-500 text-white px-4 py-2 rounded mt-6 w-full hover:bg-blue-600 transition-colors" id="restart">Recommencer le quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
       { "question": "Quel appareil m√©nager, en plus du grille-pain, est apparu pendant la Belle √âpoque ?", "choices": [ "L'aspirateur", "Le micro-ondes", "Le lave-vaisselle", "Le r√©frig√©rateur" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, Les inventions : \"On voit aussi appara√Ætre des appareils comme l'aspirateur et le grille-pain.\"" }, { "question": "Quel moyen de transport a effectu√© son premier vol au d√©but des ann√©es 1900 ?", "choices": [ "L'avion", "L'h√©licopt√®re", "Le dirigeable", "La fus√©e" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, Les inventions : \"... et l'avion effectue son premier vol au d√©but 1900.\"" }, { "question": "Quelle invention a permis d'am√©liorer l'√©clairage des rues, des maisons et des commerces pendant la Belle √âpoque ?", "choices": [ "L'√©lectricit√©", "Le gaz naturel", "Les lampes √† huile", "Les bougies" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, Les inventions : \"L'√©lectricit√© permet d'am√©liorer l'√©clairage des rues, des maisons et des commerces.\"" }, { "question": "Comment les conditions de vie ont-elles chang√© pendant les Ann√©es folles ?", "choices": [ "Elles s'am√©liorent", "Elles se d√©t√©riorent", "Elles restent les m√™mes", "Elles empirent" ], "correct": 0, "reference": "Unit√© 11 - Les Ann√©es folles : \"Les conditions de vie s'am√©liorent.\"" }, { "question": "Qu'est-ce qui a permis aux travailleurs d'habiter plus loin de leur lieu de travail au d√©but du 20e si√®cle ?", "choices": [ "Le tramway", "L'automobile", "La bicyclette", "Le train √† vapeur" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, L'urbanisation : \"Les tramways permettent aux quartiers √©loign√©s du centre-ville de se d√©velopper puisque les travailleurs peuvent d√©sormais habiter plus loin de leur lieu de travail.\"" }, { "question": "Quelle p√©riode historique a √©t√© marqu√©e par une augmentation de la consommation et une baisse des prix des produits ?", "choices": [ "Les Ann√©es folles", "La Belle √âpoque", "La Premi√®re Guerre mondiale", "La Grande Crise" ], "correct": 0, "reference": "Unit√© 11 - Les Ann√©es folles : \"- La consommation augmente.\n- Les prix des produits baissent.\"" }, { "question": "Qu'est-ce que les gouvernements ont mis en place pour aider les gens pendant la Grande Crise ?", "choices": [ "Des programmes de travaux publics", "Des augmentations d'imp√¥ts", "Des r√©ductions de salaires", "Des fermetures d'√©coles" ], "correct": 0, "reference": "Unit√© 12 - La Grande Crise, La charit√© et l'aide des gouvernements : \"Ils mettent en place des programmes de travaux publics (route, aqueduc, parc) pour employer les travailleurs sans emploi.\"" }, { "question": "Quelle √©tait la r√©action initiale de l'arm√©e canadienne pour recruter des soldats pendant la Premi√®re Guerre mondiale ?", "choices": [ "Faire appel aux volontaires", "Imposer la conscription", "Engager des mercenaires", "Recruter uniquement des francophones" ], "correct": 0, "reference": "Unit√© 10 - La Premi√®re Guerre mondiale, La division au sein de la population : \"Au d√©part, l'arm√©e canadienne fait appel aux volontaires pour joindre ses rangs.\"" }, { "question": "Quel √©tait le r√¥le des infirmi√®res pendant la Premi√®re Guerre mondiale ?", "choices": [ "Elles ont r√©pondu √† l'appel pour joindre l'arm√©e", "Elles ont men√© des mouvements f√©ministes", "Elles ont travaill√© dans les usines", "Elles ont refus√© de participer √† la guerre" ], "correct": 0, "reference": "Unit√© 10 - La Premi√®re Guerre mondiale, La division au sein de la population : \"Beaucoup de gens r√©pondent √† l'appel dont plusieurs infirmi√®res.\"" }, { "question": "Quel impact la Grande Crise a-t-elle eu sur les exportations de produits au Canada ?", "choices": [ "Elles diminuent de fa√ßon importante", "Elles augmentent", "Elles restent stables", "Elles cessent compl√®tement" ], "correct": 0, "reference": "Unit√© 12 - La Grande Crise, Les cons√©quences de la Grande Crise au Canada : \"Les exportations de produits diminuent de fa√ßon importante.\"" }, { "question": "Quels types de projets ont √©t√© r√©alis√©s dans le cadre des programmes de travaux publics pendant la Grande Crise ?", "choices": [ "Routes, aqueducs, parcs", "Centres commerciaux", "√âcoles priv√©es", "Usines d'armement" ], "correct": 0, "reference": "Unit√© 12 - La Grande Crise, La charit√© et l'aide des gouvernements : \"Ils mettent en place des programmes de travaux publics (route, aqueduc, parc) pour employer les travailleurs sans emploi.\"" }, { "question": "Qu'est-ce qui caract√©rise le rel√¢chement des m≈ìurs pendant les Ann√©es folles ?", "choices": [ "Des comportements plus libres, moins cadr√©s par la religion", "Une stricte observance des traditions religieuses", "Une augmentation des r√®gles sociales", "Un retour aux valeurs conservatrices" ], "correct": 0, "reference": "Unit√© 11 - Les Ann√©es folles : \"Il y a un rel√¢chement des m≈ìurs (les comportements sont plus libres, moins cadr√©s par la religion).\"" }, { "question": "Quel nouveau moyen de transport est apparu pendant la Belle √âpoque en plus de l'automobile ?", "choices": [ "La bicyclette", "Le m√©tro", "Le train √©lectrique", "La moto" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, Les inventions : \"La bicyclette fait aussi son entr√©e comme moyen de transport...\"" }, { "question": "Quelles actions les femmes ont-elles entreprises pour mettre fin √† la discrimination dans les ann√©es 1920 ?", "choices": [ "Se regroupent dans des mouvements f√©ministes", "Arr√™tent de travailler", "D√©m√©nagent en ville", "S'opposent au vote des hommes" ], "correct": 0, "reference": "Unit√© 11 - Les Ann√©es folles, Le f√©minisme et les in√©galit√©s : \"Pour mettre fin √† ces in√©galit√©s... celles-ci se regroupent dans des mouvements f√©ministes.\"" }, { "question": "Quel √©v√©nement √©conomique s'est produit le 24 octobre 1929 ?", "choices": [ "La chute de la Bourse de New-York", "La fin de la Premi√®re Guerre mondiale", "Le d√©but de la Seconde Guerre mondiale", "La fondation de la premi√®re Caisse populaire" ], "correct": 0, "reference": "Unit√© 12 - La Grande Crise : \"Le 24 octobre 1929, la Bourse de New-York chute brutalement.\"" }, { "question": "Comment appelle-t-on la chute brutale des actions qui a caus√© la Grande Crise ?", "choices": [ "Un krach", "Une inflation", "Une r√©cession", "Un boom √©conomique" ], "correct": 0, "reference": "Unit√© 12 - La Grande Crise : \"Cela aggrave la situation et cause ce qu'on appelle un ¬´ krach ¬ª.\"" }, { "question": "Quelle p√©riode est connue pour √™tre une p√©riode de d√©couvertes scientifiques et de progr√®s technologiques ?", "choices": [ "La Belle √âpoque", "Les Ann√©es folles", "La Grande Crise", "La Premi√®re Guerre mondiale" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, Les inventions : \"La Belle √âpoque est une p√©riode de d√©couvertes scientifiques et de progr√®s technologiques.\"" }, { "question": "Pourquoi les hommes d'affaires se sont-ils enrichis pendant la Belle √âpoque ?", "choices": [ "√Ä cause d'un boom √©conomique dans la province", "Gr√¢ce √† la Grande Crise", "√Ä cause de la guerre", "En empruntant aux agriculteurs" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque : \"Pendant cette p√©riode de prosp√©rit√©, les hommes d'affaires s'enrichissent, notamment √† cause d'un boom √©conomique dans la province...\"" }, { "question": "Quels √©taient les besoins combl√©s par les organismes de charit√© pendant la Grande Crise ?", "choices": [ "Des v√™tements et de la nourriture", "Un logement gratuit", "Des emplois bien r√©mun√©r√©s", "Des services m√©dicaux" ], "correct": 0, "reference": "Unit√© 12 - La Grande Crise, La charit√© et l'aide des gouvernements : \"Les organismes de charit√© distribuaient : - Des v√™tements et de la nourriture.\"" }, { "question": "Pourquoi les banques refusaient-elles de pr√™ter aux agriculteurs pendant la Belle √âpoque ?", "choices": [ "Malgr√© le boom √©conomique, elles refusent de pr√™ter de l'argent aux agriculteurs", "Parce que les agriculteurs √©taient trop riches", "Parce que les agriculteurs ne remboursaient pas leurs pr√™ts", "Parce que les banques manquaient de fonds" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque : \"Malgr√© ce boom √©conomique, les banques refusent de pr√™ter de l'argent aux agriculteurs.\"" }, { "question": "Quels appareils ont commenc√© √† occuper de plus en plus de place dans la soci√©t√© pendant la Belle √âpoque ?", "choices": [ "L'√©lectricit√©, le t√©l√©phone et l'automobile", "La t√©l√©vision et l'ordinateur", "Le micro-ondes et le r√©frig√©rateur", "Le train √† grande vitesse et l'internet" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, Les inventions : \"L'√©lectricit√©, le t√©l√©phone et l'automobile occupent de plus en plus de place dans la soci√©t√©.\"" }, { "question": "Pendant la Grande Crise, quelle mesure n'a pas √©t√© prise par les gouvernements pour aider les gens dans le besoin ?", "choices": [ "Augmenter les imp√¥ts", "Offrir des coupons √©changeables", "Mettre en place des programmes de travaux publics", "Aider √† combler les besoins de base" ], "correct": 0, "reference": "Unit√© 12 - La Grande Crise, La charit√© et l'aide des gouvernements : (Aucune mention d'une augmentation des imp√¥ts comme mesure prise)" }, { "question": "Quel √©tait l'impact de l'urbanisation sur les villes au d√©but du 20e si√®cle ?", "choices": [ "Les villes se d√©veloppent rapidement", "Les villes se d√©peuplent", "Les villes restent stables", "Les villes deviennent des zones agricoles" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, L'urbanisation : \"Les villes se d√©veloppent rapidement.\"" }, { "question": "Quelle √©tait l'attitude des francophones envers la guerre ?", "choices": [ "Ils √©taient contre leur participation, car elle ne les concerne pas", "Ils √©taient pour leur participation", "Ils √©taient indiff√©rents", "Ils voulaient envahir l'Allemagne" ], "correct": 0, "reference": "Unit√© 10 - La Premi√®re Guerre mondiale, La division au sein de la population : \"Les francophones sont contre leur participation √† la guerre, car ils disent qu'elle ne les concerne pas.\"" }, { "question": "Quel √©tait l'effet de la diminution du nombre d'heures de travail pendant les Ann√©es folles ?", "choices": [ "Les conditions de vie s'am√©liorent", "Les salaires diminuent", "Le ch√¥mage augmente", "Les gens travaillent plus" ], "correct": 0, "reference": "Unit√© 11 - Les Ann√©es folles : \"- Le nombre d'heures de travail diminue.\n- Les conditions de vie s'am√©liorent.\"" }, { "question": "Quel √©l√©ment ne fait pas partie des cons√©quences de la Grande Crise au Canada ?", "choices": [ "Augmentation des exportations", "Fermeture d'usines", "Augmentation de la pauvret√©", "Pertes d'emplois" ], "correct": 0, "reference": "Unit√© 12 - La Grande Crise, Les cons√©quences de la Grande Crise au Canada : (Les exportations diminuent, elles n'augmentent pas)" }, { "question": "Comment les femmes √©taient-elles pay√©es par rapport aux hommes dans les ann√©es 1920 ?", "choices": [ "Elles sont moins bien pay√©es que les hommes", "Elles sont pay√©es de la m√™me mani√®re", "Elles sont mieux pay√©es que les hommes", "Elles ne sont pas pay√©es" ], "correct": 0, "reference": "Unit√© 11 - Les Ann√©es folles, Le f√©minisme et les in√©galit√©s : \"Les femmes sont moins bien pay√©es que les hommes.\"" }, { "question": "Quelle invention a chang√© et facilit√© la vie des Qu√©b√©cois pendant la Belle √âpoque ?", "choices": [ "Le t√©l√©phone", "La t√©l√©vision", "L'ordinateur", "Le satellite" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, Les inventions : \"L'√©lectricit√©, le t√©l√©phone et l'automobile occupent de plus en plus de place dans la soci√©t√©.\"" }, { "question": "Comment les salaires ont-ils √©volu√© pendant les Ann√©es folles ?", "choices": [ "Ils augmentent", "Ils diminuent", "Ils restent stables", "Ils sont supprim√©s" ], "correct": 0, "reference": "Unit√© 11 - Les Ann√©es folles : \"Les salaires augmentent.\"" }, { "question": "Qu'est-ce qui a permis le d√©veloppement des quartiers √©loign√©s du centre-ville au d√©but du 20e si√®cle ?", "choices": [ "Le tramway", "La voiture √©lectrique", "Le m√©tro", "La moto" ], "correct": 0, "reference": "Unit√© 9 - La Belle √âpoque, L'urbanisation : \"Les tramways permettent aux quartiers √©loign√©s du centre-ville de se d√©velopper...\"" }
        ];

        const shuffledQuestions = [...questions]
            .sort(() => Math.random() - 0.5)
            .slice(0, 30);

        const questionElement = document.getElementById("question");
        const choicesElement = document.getElementById("choices");
        const scoreElement = document.getElementById("score");
        const restartButton = document.getElementById("restart");
        const timerElement = document.getElementById("timer");

        let currentQuestionIndex = 0;
        let score = 0;
        let countdown;

        const QUESTION_TIME = 20;
        const MAX_POINTS_PER_QUESTION = 30;

        const POINTS_CONFIG = {
            FAST: 30,    // 0-7 secondes
            MEDIUM: 20,  // 8-14 secondes
            SLOW: 10     // 15-20 secondes
        };

        function calculatePoints(timeLeft) {
            if (timeLeft >= 13) return POINTS_CONFIG.FAST;
            if (timeLeft >= 6) return POINTS_CONFIG.MEDIUM;
            return POINTS_CONFIG.SLOW;
        }

        function updateProgressBar() {
            const progressBar = document.getElementById("progress");
            const currentScoreElement = document.getElementById("current-score");
            const maxPossibleScore = shuffledQuestions.length * MAX_POINTS_PER_QUESTION;
            const percentage = (score / maxPossibleScore) * 100;
            progressBar.style.width = `${percentage}%`;
            currentScoreElement.textContent = `${score} / ${maxPossibleScore}`;
        }

        function showQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];
            questionElement.textContent = question.question;
            
            // Supprimer tout feedback pr√©c√©dent
            const oldFeedback = document.querySelector('.feedback-container');
            if (oldFeedback) oldFeedback.remove();
            
            choicesElement.innerHTML = "";
            let timeLeft = QUESTION_TIME;
            timerElement.textContent = `Temps restant : ${timeLeft} secondes`;
            timerElement.classList.remove('text-red-600');

            // Cr√©er un tableau de choix avec leurs indices
            const shuffledChoices = question.choices.map((choice, index) => ({
                text: choice,
                originalIndex: index
            })).sort(() => Math.random() - 0.5);

            shuffledChoices.forEach((choice) => {
                const button = document.createElement("button");
                button.setAttribute('type', 'button');
                button.classList.add(
                    "choice",
                    "w-full",
                    "bg-gray-200",
                    "px-4",
                    "py-3",
                    "rounded",
                    "hover:bg-blue-300",
                    "cursor-pointer",
                    "transition",
                    "focus:outline-none",
                    "focus:ring-2",
                    "focus:ring-blue-500"
                );
                button.textContent = choice.text;
                button.addEventListener("click", () => checkAnswer(choice.originalIndex));
                choicesElement.appendChild(button);
            });

            // Start countdown
            countdown = setInterval(() => {
                timeLeft--;
                timerElement.textContent = `Temps restant : ${timeLeft} secondes`;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    checkAnswer(-1); // Timeout: No answer selected
                }
            }, 1000);

            // Mettre √† jour le compteur de questions
            document.getElementById("question-counter").textContent = 
                `Question ${currentQuestionIndex + 1}/${shuffledQuestions.length}`;
        }

        function checkAnswer(selected) {
            clearInterval(countdown);
            const timeLeft = parseInt(timerElement.textContent.match(/\d+/)[0]);
            const question = shuffledQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll(".choice");
            
            // Cr√©er le conteneur de feedback
            const feedbackContainer = document.createElement('div');
            feedbackContainer.classList.add('feedback-container', 'mt-2', 'mb-4', 'space-y-2');
            
            // Ajouter la r√©f√©rence en premier
            const referenceContainer = document.createElement('div');
            referenceContainer.classList.add('text-sm', 'text-gray-600', 'mt-2');
            referenceContainer.textContent = `R√©f√©rence: ${question.reference}`;
            feedbackContainer.appendChild(referenceContainer);
            
            // Message de feedback
            const feedbackMessage = document.createElement('div');
            feedbackMessage.classList.add('text-center', 'font-bold');
            
            if (selected === question.correct) {
                const pointsEarned = calculatePoints(timeLeft);
                score += pointsEarned;
                
                feedbackMessage.textContent = `Bonne r√©ponse! +${pointsEarned} points üëè`;
                feedbackMessage.classList.add('text-green-600');
                buttons[selected]?.classList.add("bg-green-400");
                updateProgressBar();
            } else if (selected !== -1) {
                feedbackMessage.textContent = "Mauvaise r√©ponse üòï";
                feedbackMessage.classList.add('text-red-600');
                buttons[selected]?.classList.add("bg-red-400");
                buttons[question.correct]?.classList.add("bg-green-400");
            } else {
                feedbackMessage.textContent = "Temps √©coul√© üòï";
                feedbackMessage.classList.add('text-red-600');
                buttons[question.correct]?.classList.add("bg-green-400");
            }

            // Bouton Continuer
            const continueButton = document.createElement('button');
            continueButton.textContent = 'Continuer';
            continueButton.classList.add(
                'bg-blue-500',
                'text-white',
                'px-4',
                'py-2',
                'rounded',
                'w-full',
                'hover:bg-blue-600',
                'transition-colors',
                'mt-2'
            );
            
            feedbackContainer.appendChild(feedbackMessage);
            feedbackContainer.appendChild(continueButton);
            
            // Ins√©rer le conteneur de feedback apr√®s la question
            questionElement.parentNode.insertBefore(feedbackContainer, questionElement.nextSibling);
            
            buttons.forEach((button) => (button.style.pointerEvents = "none"));
            
            continueButton.addEventListener('click', () => {
                currentQuestionIndex++;
                if (currentQuestionIndex < shuffledQuestions.length) {
                    showQuestion();
                } else {
                    showScore();
                }
            });
        }

        function showScore() {
            questionElement.style.display = "none";
            choicesElement.style.display = "none";
            timerElement.style.display = "none";
            scoreElement.style.display = "block";
            
            // Calcul du pourcentage bas√© sur le score maximum possible
            const maxPossibleScore = shuffledQuestions.length * MAX_POINTS_PER_QUESTION;
            const percentage = (score / maxPossibleScore) * 100;
            
            let message = "";
            if (percentage >= 80) message = "Excellent! üéâ";
            else if (percentage >= 60) message = "Bien jou√©! üëç";
            else message = "Continuez vos efforts! üí™";
            
            scoreElement.innerHTML = `
                <div class="text-2xl mb-4">Votre score : ${score} / ${maxPossibleScore}</div>
                <div class="text-lg text-gray-600">${message}</div>
            `;
            restartButton.style.display = "block";
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            updateProgressBar(); // R√©initialiser la barre de progression
            
            // R√©afficher les √©l√©ments cach√©s
            questionElement.style.display = "block";
            choicesElement.style.display = "block";
            timerElement.style.display = "block";
            scoreElement.style.display = "none";
            
            // Rem√©langer les questions
            shuffledQuestions.sort(() => Math.random() - 0.5);
            
            showQuestion();
        }

        restartButton.addEventListener("click", restartQuiz);

        showQuestion();
    </script>
</body>
</html>